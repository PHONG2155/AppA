#:kivy 2.3.0

<GradientBG@FloatLayout>:
    canvas.before:
        Color:
            rgba: (0.07, 0.09, 0.2, 1)  # n·ªÅn t·ªëi xanh navy
        Rectangle:
            pos: self.pos
            size: self.size
        Color:
            rgba: (0.0, 0.6, 0.7, 0.18)  # l·ªõp gradient teal
        RoundedRectangle:
            pos: self.x - self.width*0.3, self.y + self.height*0.4
            size: self.width*1.4, self.height*1.2
            radius: [200,200,200,200]
        Color:
            rgba: (0.4, 0.2, 0.8, 0.18)  # l·ªõp gradient t√≠m
        RoundedRectangle:
            pos: self.x + self.width*0.2, self.y - self.height*0.2
            size: self.width*1.2, self.height*1.0
            radius: [200,200,200,200]

<Card@BoxLayout>:
    orientation: "vertical"
    size_hint: 0.9, None
    height: self.minimum_height
    padding: dp(20)
    spacing: dp(14)
    pos_hint: {"center_x": 0.5}
    canvas.before:
        Color:
            rgba: (1,1,1,0.07)
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [20,20,20,20]
        Color:
            rgba: (1,1,1,0.18)
        Line:
            width: 1
            rounded_rectangle: (self.x, self.y, self.width, self.height, 20, 20, 20, 20, 100)

<TitleLabel@Label>:
    font_size: "24sp"
    bold: True
    color: 1,1,1,1
    halign: "left"
    text_size: self.size

<HintLabel@Label>:
    font_size: "14sp"
    color: .7,.7,.8,1
    halign: "left"
    text_size: self.size

<InputBox@BoxLayout>:
    orientation: "vertical"
    size_hint_y: None
    height: self.minimum_height
    spacing: dp(6)

    Label:
        text: root.label if hasattr(root, "label") else ""
        font_size: "14sp"
        color: .8,.9,1,1
        size_hint_y: None
        height: self.texture_size[1]

    BoxLayout:
        size_hint_y: None
        height: dp(48)
        padding: dp(14), 0
        spacing: dp(8)
        canvas.before:
            Color:
                rgba: 1,1,1,0.08
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [12,12,12,12]
            Color:
                rgba: 1,1,1,0.22
            Line:
                width: 1
                rounded_rectangle: (self.x, self.y, self.width, self.height, 12,12,12,12,100)

        Image:
            source: root.icon if hasattr(root, "icon") else ""
            size_hint_x: None
            width: dp(20)
            allow_stretch: True
            keep_ratio: True
            color: 1,1,1,0.8

        TextInput:
            id: field
            hint_text: root.hint if hasattr(root, "hint") else ""
            background_color: 0,0,0,0
            foreground_color: 1,1,1,1
            cursor_color: 1,1,1,1
            padding: [0, dp(14), 0, dp(14)]
            password: root.password if hasattr(root, "password") else False
            multiline: False
            font_size: "15sp"

<PrimaryButton@Button>:
    size_hint_y: None
    height: dp(50)
    background_normal: ""
    background_down: ""
    font_size: "16sp"
    bold: True
    color: 1,1,1,1
    canvas.before:
        Color:
            rgba: (0.0, 0.6, 0.7, 1)  # teal
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [14,14,14,14]

<TextButton@ButtonBehavior+Label>:
    color: 0.5,0.8,1,1
    font_size: "14sp"
    halign: "center"
    text_size: self.size


<LoginScreen>:
    email_input: email_field
    password_input: pw_field
    message_label: login_msg

    GradientBG:
        Card:
            spacing: dp(16)
            padding: dp(20)
            BoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(4)
                TitleLabel:
                    text: "Ch√†o m·ª´ng tr·ªü l·∫°i üëã"
                HintLabel:
                    text: "ƒêƒÉng nh·∫≠p ƒë·ªÉ ti·∫øp t·ª•c"

            InputBox:
                label: "Email"
                icon: ""
                hint: "nh·∫≠p email"
                InputBox.field:
                    id: email_field

            InputBox:
                label: "M·∫≠t kh·∫©u"
                icon: ""
                hint: "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                password: True
                InputBox.field:
                    id: pw_field

            Label:
                id: login_msg
                text: ""
                font_size: "14sp"
                color: 1,0.4,0.4,1
                size_hint_y: None
                height: self.texture_size[1]

            PrimaryButton:
                text: "ƒêƒÉng nh·∫≠p"
                on_release: root.do_login()

            TextButton:
                text: "Ch∆∞a c√≥ t√†i kho·∫£n? ƒêƒÉng k√Ω"
                on_release: root.goto_register()


<RegisterScreen>:
    name_input: name_field
    email_input: email_field
    pw_input: pw_field
    pw2_input: pw2_field
    message_label: reg_msg

    GradientBG:
        Card:
            spacing: dp(16)
            padding: dp(20)

            BoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(4)
                TitleLabel:
                    text: "T·∫°o t√†i kho·∫£n ‚ú®"
                HintLabel:
                    text: "Mi·ªÖn ph√≠, nhanh ch√≥ng"

            InputBox:
                label: "H·ªç v√† t√™n"
                hint: "V√≠ d·ª•: Nguy·ªÖn VƒÉn A"
                icon: ""
                InputBox.field:
                    id: name_field

            InputBox:
                label: "Email"
                hint: "you@example.com"
                icon: ""
                InputBox.field:
                    id: email_field

            InputBox:
                label: "M·∫≠t kh·∫©u"
                hint: "√≠t nh·∫•t 4 k√Ω t·ª±"
                icon: ""
                password: True
                InputBox.field:
                    id: pw_field

            InputBox:
                label: "Nh·∫≠p l·∫°i m·∫≠t kh·∫©u"
                hint: "g√µ l·∫°i gi·ªëng ·ªü tr√™n"
                icon: ""
                password: True
                InputBox.field:
                    id: pw2_field

            Label:
                id: reg_msg
                text: ""
                font_size: "14sp"
                color: 1,0.4,0.4,1
                size_hint_y: None
                height: self.texture_size[1]

            PrimaryButton:
                text: "ƒêƒÉng k√Ω"
                on_release: root.do_register()

            TextButton:
                text: "ƒê√£ c√≥ t√†i kho·∫£n? ƒêƒÉng nh·∫≠p"
                on_release: root.goto_login()


<HomeScreen>:
    GradientBG:
        Card:
            spacing: dp(20)
            padding: dp(20)

            BoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                spacing: dp(6)

                TitleLabel:
                    text: root.welcome_text
                HintLabel:
                    text: "B·∫°n ƒë√£ ƒëƒÉng nh·∫≠p th√†nh c√¥ng. ƒê√¢y l√† m√†n h√¨nh ch√≠nh."
            PrimaryButton:
                text: "ƒêƒÉng xu·∫•t"
                on_release:
                    app.current_user = ""
                    root.manager.current = "login"
